tosca_definitions_version: tosca_simple_yaml_1_1
metadata:
  invariantUUID: 224c558c-56ab-40f8-9018-40846d8735a5
  UUID: 7fa6cae7-4a51-4f8b-b0ef-bbac305412ed
  name: manualDistributionTestVSP-nodes.simpleCvfc
  description: Complex node type that is used as nested type in VF
  type: CVFC
  category: Generic
  subcategory: Abstract
  resourceVendor: Test
  resourceVendorRelease: '1.0'
  resourceVendorModelNumber: ''
imports:
- nodes:
    file: nodes.yml
- datatypes:
    file: data.yml
- capabilities:
    file: capabilities.yml
- relationships:
    file: relationships.yml
- groups:
    file: groups.yml
- policies:
    file: policies.yml
- annotations:
    file: annotations.yml
- resource-manualDistributionTestVSP-nodes.simpleCvfc-interface:
    file: resource-ManualdistributiontestvspNodesSimplecvfc-template-interface.yml
- resource-Manualdistributiontestvsp.compute.nodes.heat.simple:
    file: resource-ManualdistributiontestvspComputeNodesHeatSimple-template.yml
- resource-extNeutronCP:
    file: resource-Extneutroncp-template.yml
topology_template:
  inputs:
    compute_simple_user_data_format:
      type: list
      required: true
      entry_schema:
        type: string
    port_simple_private_port_network:
      type: list
      required: true
      entry_schema:
        type: string
    nfc_naming:
      default:
        ecomp_generated_naming: true
      type: org.openecomp.datatypes.Naming
      description: vfc naming
      required: false
    port_simple_private_port_related_networks:
      type: list
      required: true
      entry_schema:
        type: org.openecomp.datatypes.network.RelatedNetworksAssignments
    vm_flavor_name:
      type: string
      required: true
    port_simple_private_port_fixed_ips:
      type: list
      required: true
      entry_schema:
        type: org.openecomp.datatypes.heat.neutron.port.FixedIps
    port_simple_private_port_subnetpoolid:
      type: string
      required: true
    service_template_filter:
      default:
        index_value: 0
        count: '1'
        scaling_enabled: true
        mandatory: true
      type: org.openecomp.datatypes.heat.substitution.SubstitutionFiltering
      description: Substitution Filter
      required: true
    port_simple_private_port_ip_requirements:
      type: list
      required: true
      entry_schema:
        type: org.openecomp.datatypes.network.IpRequirements
    vm_image_name:
      type: string
      required: true
    vm_type_tag:
      type: string
      description: vm type based on naming Convention
      required: false
    high_availablity:
      type: string
      description: high_availablity
      required: false
    port_simple_private_port_network_role_tag:
      type: string
      required: true
    compute_simple_metadata:
      type: list
      required: true
      entry_schema:
        type: json
    nfc_naming_code:
      type: string
      description: nfc code for instance naming
      required: false
    nfc_function:
      type: string
      required: false
    index_value:
      default: 0
      type: integer
      description: Index value of this substitution service template runtime instance
      required: false
    compute_simple_key_name:
      type: list
      required: true
      entry_schema:
        type: string
    max_instances:
      type: integer
      description: Maximum number of VFC Instances
      required: false
    compute_simple_name:
      type: list
      required: true
      entry_schema:
        type: string
    port_simple_private_port_order:
      type: integer
      required: true
    compute_simple_availability_zone:
      type: list
      required: true
      entry_schema:
        type: string
    port_simple_private_port_mac_requirements:
      default:
        mac_count_required:
          is_required: false
      type: org.openecomp.datatypes.network.MacRequirements
      required: true
    port_simple_private_port_network_role:
      type: string
      required: true
    min_instances:
      default: 0
      type: integer
      description: Minimum number of VFC Instances
      required: false
    port_simple_private_port_vlan_requirements:
      type: list
      required: true
      entry_schema:
        type: org.openecomp.datatypes.network.VlanRequirements
    port_simple_private_port_exCP_naming:
      default:
        ecomp_generated_naming: true
      type: org.openecomp.datatypes.Naming
      required: true
  node_templates:
    simple_simple_private_port:
      type: org.openecomp.resource.cp.v2.extNeutronCP
      metadata:
        invariantUUID: 3fed24ab-7a60-40cd-a52b-520df0d743e8
        UUID: e3334a40-6ede-4d38-975b-705e9cb99d2f
        customizationUUID: cabd6198-f37f-4868-8a95-120296945db0
        version: '1.0'
        name: extNeutronCP
        description: The AT&T Connection Point base type all other CP derive from
        type: CP
        category: Generic
        subcategory: Network Elements
        resourceVendor: ONAP (Tosca)
        resourceVendorRelease: 1.0.0.wd03
        resourceVendorModelNumber: ''
      properties:
        subnetpoolid:
          get_input: port_simple_private_port_subnetpoolid
        is_default: false
        related_networks:
          get_input: port_simple_private_port_related_networks
        network:
          get_input:
          - port_simple_private_port_network
          - index_value
        replacement_policy: AUTO
        ip_requirements:
          get_input: port_simple_private_port_ip_requirements
        network_role:
          get_input: port_simple_private_port_network_role
        fixed_ips:
          get_input:
          - port_simple_private_port_fixed_ips
          - index_value
        subinterface_indicator: false
        mac_requirements:
          get_input: port_simple_private_port_mac_requirements
        admin_state_up: true
        exCP_naming:
          get_input: port_simple_private_port_exCP_naming
        vlan_requirements:
          get_input: port_simple_private_port_vlan_requirements
        network_role_tag:
          get_input: port_simple_private_port_network_role_tag
        order:
          get_input: port_simple_private_port_order
      requirements:
      - binding:
          capability: binding
          node: simple
      capabilities:
        network.incoming.packets.rate_simple_simple_private_port:
          properties:
            unit: packet/s
            description: Average rate of incoming packets
            type: Gauge
            category: network
        network.incoming.packets_simple_simple_private_port:
          properties:
            unit: packet
            description: Number of incoming packets
            type: Cumulative
            category: network
        network.incoming.bytes_simple_simple_private_port:
          properties:
            unit: B
            description: Number of incoming bytes
            type: Cumulative
            category: network
        network.incoming.bytes.rate_simple_simple_private_port:
          properties:
            unit: B/s
            description: Average rate of incoming bytes
            type: Gauge
            category: network
        port_mirroring_simple_simple_private_port:
          properties:
            connection_point:
              network_role:
                get_input: port_simple_private_port_network_role
              nfc_naming_code: simple
        network.outpoing.packets_simple_simple_private_port:
          properties:
            unit: packet
            description: Number of outgoing packets
            type: Cumulative
            category: network
        network.outgoing.bytes_simple_simple_private_port:
          properties:
            unit: B
            description: Number of outgoing bytes
            type: Cumulative
            category: network
        network.outgoing.bytes.rate_simple_simple_private_port:
          properties:
            unit: B/s
            description: Average rate of outgoing bytes
            type: Gauge
            category: network
        network.outgoing.packets.rate_simple_simple_private_port:
          properties:
            unit: packet/s
            description: Average rate of outgoing packets
            type: Gauge
            category: network
    simple:
      type: org.openecomp.resource.vfc.Manualdistributiontestvsp.abstract.compute.nodes.heat.simple
      metadata:
        invariantUUID: 67a4bb59-d438-4c83-9c94-ed99b30a9b66
        UUID: 0c13eeca-9d3b-456a-9d78-73ffd155d940
        customizationUUID: d9fc7afd-3596-4296-8c78-d9befe8a9fae
        version: '1.0'
        name: Manualdistributiontestvsp.compute.nodes.heat.simple
        description: Not reusable inner VFC
        type: VFC
        category: Generic
        subcategory: Abstract
        resourceVendor: Test
        resourceVendorRelease: '1.0'
        resourceVendorModelNumber: ''
      properties:
        flavor:
          get_input: vm_flavor_name
        key_name:
          get_input:
          - compute_simple_key_name
          - index_value
        image:
          get_input: vm_image_name
        availability_zone:
          get_input:
          - compute_simple_availability_zone
          - index_value
        image_update_policy: REBUILD
        metadata:
          get_input:
          - compute_simple_metadata
          - index_value
        software_config_transport: POLL_SERVER_CFN
        contrail_service_instance_ind: false
        user_data_format:
          get_input:
          - compute_simple_user_data_format
          - index_value
        user_data_update_policy: REPLACE
        name:
          get_input:
          - compute_simple_name
          - index_value
        flavor_update_policy: RESIZE
      capabilities:
        disk.read.bytes_simple:
          properties:
            unit: B
            description: Volume of reads
            type: Cumulative
            category: compute
        cpu_simple:
          properties:
            unit: ns
            description: CPU time used
            type: Cumulative
            category: compute
        disk.device.read.bytes.rate_simple:
          properties:
            unit: B/s
            description: Average rate of reads
            type: Gauge
            category: disk
        disk.device.read.requests_simple:
          properties:
            unit: request
            description: Number of read requests
            type: Cumulative
            category: disk
        disk.capacity_simple:
          properties:
            unit: B
            description: The amount of disk that the instance can see
            type: Gauge
            category: disk
        disk.device.latency_simple:
          properties:
            unit: ms
            description: Average disk latency per device
            type: Gauge
            category: disk
        disk.write.bytes_simple:
          properties:
            unit: B
            description: Volume of writes
            type: Cumulative
            category: compute
        disk.device.capacity_simple:
          properties:
            unit: B
            description: The amount of disk per device that the instance can see
            type: Gauge
            category: disk
        disk.usage_simple:
          properties:
            unit: B
            description: The physical size in bytes of the image container on the host
            type: Gauge
            category: disk
        memory.resident_simple:
          properties:
            unit: MB
            description: Volume of RAM used by the instance on the physical machine
            type: Gauge
            category: compute
        disk.device.write.requests.rate_simple:
          properties:
            unit: request/s
            description: Average rate of write requests
            type: Gauge
            category: disk
        cpu_util_simple:
          properties:
            unit: '%'
            description: Average CPU utilization
            type: Gauge
            category: compute
        instance_simple:
          properties:
            unit: instance
            description: Existence of instance
            type: Gauge
            category: compute
        disk.ephemeral.size_simple:
          properties:
            unit: GB
            description: Size of ephemeral disk
            type: Gauge
            category: compute
        disk.device.read.bytes_simple:
          properties:
            unit: B
            description: Volume of reads
            type: Cumulative
            category: disk
        scalable_simple:
          properties:
            max_instances: 1
            min_instances: 1
        memory.usage_simple:
          properties:
            unit: MB
            description: Volume of RAM used by the instance from the amount of its allocated memory
            type: Gauge
            category: compute
        disk.device.iops_simple:
          properties:
            unit: count/s
            description: Average disk iops per device
            type: Gauge
            category: disk
        memory_simple:
          properties:
            unit: MB
            description: Volume of RAM allocated to the instance
            type: Gauge
            category: compute
        disk.iops_simple:
          properties:
            unit: count/s
            description: Average disk iops
            type: Gauge
            category: disk
        disk.read.bytes.rate_simple:
          properties:
            unit: B/s
            description: Average rate of reads
            type: Gauge
            category: compute
        disk.device.usage_simple:
          properties:
            unit: B
            description: The physical size in bytes of the image container on the host per device
            type: Gauge
            category: disk
        disk.latency_simple:
          properties:
            unit: ms
            description: Average disk latency
            type: Gauge
            category: disk
        disk.allocation_simple:
          properties:
            unit: B
            description: The amount of disk occupied by the instance on the host machine
            type: Gauge
            category: disk
        disk.device.read.requests.rate_simple:
          properties:
            unit: request/s
            description: Average rate of read requests
            type: Gauge
            category: disk
        disk.device.allocation_simple:
          properties:
            unit: B
            description: The amount of disk per device occupied by the instance on the host machine
            type: Gauge
            category: disk
        disk.device.write.bytes_simple:
          properties:
            unit: B
            description: Volume of writes
            type: Cumulative
            category: disk
        disk.read.requests_simple:
          properties:
            unit: request
            description: Number of read requests
            type: Cumulative
            category: compute
        disk.device.write.requests_simple:
          properties:
            unit: request
            description: Number of write requests
            type: Cumulative
            category: disk
        endpoint_simple:
          properties:
            secure: true
        cpu.delta_simple:
          properties:
            unit: ns
            description: CPU time used since previous datapoint
            type: Delta
            category: compute
        vcpus_simple:
          properties:
            unit: vcpu
            description: Number of virtual CPUs allocated to the instance
            type: Gauge
            category: compute
        disk.device.write.bytes.rate_simple:
          properties:
            unit: B/s
            description: Average rate of writes
            type: Gauge
            category: disk
        disk.root.size_simple:
          properties:
            unit: GB
            description: Size of root disk
            type: Gauge
            category: compute
        disk.write.bytes.rate_simple:
          properties:
            unit: B/s
            description: Average rate of writes
            type: Gauge
            category: compute
        disk.write.requests.rate_simple:
          properties:
            unit: request/s
            description: Average rate of write requests
            type: Gauge
            category: compute
        disk.write.requests_simple:
          properties:
            unit: request
            description: Number of write requests
            type: Cumulative
            category: compute
  substitution_mappings:
    node_type: org.openecomp.resource.vfc.Manualdistributiontestvspcvfc.abstract.nodes.simple
    capabilities:
      disk.device.read.requests_simple:
      - simple
      - disk.device.read.requests
      disk.device.read.bytes.rate_simple:
      - simple
      - disk.device.read.bytes.rate
      disk.read.bytes_simple:
      - simple
      - disk.read.bytes
      disk.capacity_simple:
      - simple
      - disk.capacity
      disk.write.bytes_simple:
      - simple
      - disk.write.bytes
      network.incoming.bytes.rate_simple_simple_private_port:
      - simple_simple_private_port
      - network.incoming.bytes.rate
      host_simple:
      - simple
      - host
      disk.usage_simple:
      - simple
      - disk.usage
      feature_simple_simple_private_port:
      - simple_simple_private_port
      - feature
      disk.device.write.requests.rate_simple:
      - simple
      - disk.device.write.requests.rate
      disk.ephemeral.size_simple:
      - simple
      - disk.ephemeral.size
      feature_simple:
      - simple
      - feature
      os_simple:
      - simple
      - os
      memory_simple:
      - simple
      - memory
      disk.iops_simple:
      - simple
      - disk.iops
      network.outgoing.bytes_simple_simple_private_port:
      - simple_simple_private_port
      - network.outgoing.bytes
      disk.device.usage_simple:
      - simple
      - disk.device.usage
      disk.latency_simple:
      - simple
      - disk.latency
      binding_simple:
      - simple
      - binding
      port_mirroring_simple_simple_private_port:
      - simple_simple_private_port
      - port_mirroring
      disk.device.write.requests_simple:
      - simple
      - disk.device.write.requests
      binding_simple_simple_private_port:
      - simple_simple_private_port
      - binding
      endpoint_simple:
      - simple
      - endpoint
      disk.write.bytes.rate_simple:
      - simple
      - disk.write.bytes.rate
      disk.write.requests.rate_simple:
      - simple
      - disk.write.requests.rate
      disk.write.requests_simple:
      - simple
      - disk.write.requests
      cpu_simple:
      - simple
      - cpu
      network.incoming.packets.rate_simple_simple_private_port:
      - simple_simple_private_port
      - network.incoming.packets.rate
      disk.device.latency_simple:
      - simple
      - disk.device.latency
      disk.device.capacity_simple:
      - simple
      - disk.device.capacity
      memory.resident_simple:
      - simple
      - memory.resident
      instance_simple:
      - simple
      - instance
      cpu_util_simple:
      - simple
      - cpu_util
      disk.device.read.bytes_simple:
      - simple
      - disk.device.read.bytes
      scalable_simple:
      - simple
      - scalable
      disk.device.iops_simple:
      - simple
      - disk.device.iops
      memory.usage_simple:
      - simple
      - memory.usage
      network.outpoing.packets_simple_simple_private_port:
      - simple_simple_private_port
      - network.outpoing.packets
      disk.read.bytes.rate_simple:
      - simple
      - disk.read.bytes.rate
      forwarder_simple_simple_private_port:
      - simple_simple_private_port
      - forwarder
      attachment_simple_simple_private_port:
      - simple_simple_private_port
      - attachment
      disk.device.read.requests.rate_simple:
      - simple
      - disk.device.read.requests.rate
      disk.allocation_simple:
      - simple
      - disk.allocation
      network.outgoing.bytes.rate_simple_simple_private_port:
      - simple_simple_private_port
      - network.outgoing.bytes.rate
      disk.device.allocation_simple:
      - simple
      - disk.device.allocation
      disk.device.write.bytes_simple:
      - simple
      - disk.device.write.bytes
      disk.read.requests_simple:
      - simple
      - disk.read.requests
      network.incoming.bytes_simple_simple_private_port:
      - simple_simple_private_port
      - network.incoming.bytes
      network.incoming.packets_simple_simple_private_port:
      - simple_simple_private_port
      - network.incoming.packets
      cpu.delta_simple:
      - simple
      - cpu.delta
      vcpus_simple:
      - simple
      - vcpus
      disk.root.size_simple:
      - simple
      - disk.root.size
      disk.device.write.bytes.rate_simple:
      - simple
      - disk.device.write.bytes.rate
      network.outgoing.packets.rate_simple_simple_private_port:
      - simple_simple_private_port
      - network.outgoing.packets.rate
    requirements:
      dependency_simple_simple_private_port:
      - simple_simple_private_port
      - dependency
      local_storage_simple:
      - simple
      - local_storage
      dependency_simple:
      - simple
      - dependency
      link_simple_simple_private_port:
      - simple_simple_private_port
      - link
